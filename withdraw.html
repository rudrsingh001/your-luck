<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Withdraw</title>
  <style>
    body{font-family:Arial;margin:0;background:#0b66ff;color:#111}
    .box{max-width:420px;margin:40px auto;background:#fff;border-radius:12px;padding:18px}
    input,button{width:100%;padding:12px;margin:8px 0;font-size:16px}
    button{background:#28a745;color:#fff;border:0;border-radius:8px}
    .muted{color:#666;font-size:14px}
  </style>
</head>
<body>

  <div class="box">
    <h2>Withdraw Coins</h2>

    <p><b>Coins:</b> <span id="coins">0</span></p>
    <p><b>Balance:</b> ₹<span id="rupees">0</span></p>

    <p class="muted">Rule: 10 Coins = ₹1 | Minimum withdraw: 100 coins (₹10)</p>

    <input id="name" placeholder="Your Name" />
    <input id="upi" placeholder="Your UPI ID (example: name@upi)" />
    <input id="wcoins" type="number" placeholder="Coins to Withdraw (min 100)" />

    <button onclick="submitWithdraw()">Request Withdrawal</button>

    <p id="msg" class="muted"></p>

    <hr>
    <a href="index.html">⬅ Back to Home</a>
  </div>

<script>
  // load coins
  let coins = localStorage.getItem("coins") ? parseInt(localStorage.getItem("coins")) : 0;
  document.getElementById("coins").innerText = coins;
  document.getElementById("rupees").innerText = (coins/10).toFixed(2);

  // ✅ apne form ka base URL (viewform wala)
const FORM_URL = "https://docs.google.com/forms/d/e/XXXXXXXXXXXX/viewform?usp=pp_url";

// ✅ apne entry ids yahan paste karo
const NAME_ENTRY = "entry.1111111111";
const UPI_ENTRY  = "entry.2222222222";
const COIN_ENTRY = "entry.3333333333";

const url =
  `${FORM_URL}&${NAME_ENTRY}=${encodeURIComponent(name)}` +
  `&${UPI_ENTRY}=${encodeURIComponent(upi)}` +
  `&${COIN_ENTRY}=${encodeURIComponent(wcoins)}`;

window.open(url, "_blank");
document.getElementById("msg").innerText = "✅ Form opened. Submit to request withdrawal.";


    if(!name || !upi || !wcoins){
      document.getElementById("msg").innerText = "❌ Please fill all fields";
      return;
    }
    if(wcoins < 100){
      document.getElementById("msg").innerText = "❌ Minimum 100 coins required";
      return;
    }
    if(wcoins > coins){
      document.getElementById("msg").innerText = "❌ You don't have enough coins";
      return;
    }

    // ✅ IMPORTANT: yahan real submit backend chahiye
    // For now: copy message + show instruction
    const text = `WITHDRAW REQUEST\nName: ${name}\nUPI: ${upi}\nCoins: ${wcoins}\nAmount: ₹${(wcoins/10).toFixed(2)}`;
    navigator.clipboard?.writeText(text);

    document.getElementById("msg").innerText =
      "✅ Request created! (Copied). Abhi backend add karna hai (Google Form/Firebase)";

    // optional: temporarily deduct coins after admin approves (recommended)
    // abhi deduct mat karo, warna fake requests me coins cut ho jayenge
  }
</script>
</body>
</html>

<a href="withdraw.html">
  <button style="padding:10px 14px;border-radius:6px;">Withdraw</button>
</a>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "PASTE_HERE",
    authDomain: "PASTE_HERE",
    projectId: "PASTE_HERE",
    storageBucket: "PASTE_HERE",
    messagingSenderId: "PASTE_HERE",
    appId: "PASTE_HERE"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>
